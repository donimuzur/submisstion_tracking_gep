<odoo>
    <data>
        <record id="model_voucher_pertanggungjawaban_kasbon_view_tree" model="ir.ui.view">
            <field name="name">voucher.pertanggungjawaban.kasbon.view.tree</field>
            <field name="model">voucher.pertanggungjawaban.kasbon</field>
            <field name="arch" type="xml">
                <tree delete='0' default_order="write_date desc" decoration-warning="state=='onprocess'"  decoration-info="state == 'draft'" decoration-success="state=='finished'" decoration-danger="state=='cancelled'">
                    <!-- Add your fields here -->
                    <field name="name"/>
                    <field name="diajukan_oleh"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        <record id="voucher_pertanggungjawaban_kasbon_view_form" model="ir.ui.view">
            <field name="name">voucher.pertanggungjawaban.kasbon.view.form</field>
            <field name="model">voucher.pertanggungjawaban.kasbon</field>
            <field name="arch" type="xml">
                <form string="Input Voucher pertanggungjawaban Kasbon" duplicate="false" delete='false'>
                    <header>
                        <field name="is_owner" invisible="True"/>
                        <field name="is_visible_konfimasi_button" invisible="True"/>
                        <field name="is_visible_verifikasi_button" invisible="True"/>
                        <field name="is_visible_validasi_button" invisible="True"/>
                        <field name="is_visible_approval_button" invisible="True"/>
                        <field name="is_visible_reject_button" invisible="True"/>
                        <button name="submit" class="oe_highlight" string="Submit" type="object" attrs="{'invisible':['|',('state','!=','draft'),('is_owner','!=',True)]}"/>
                        <button name="konfirmasi" class="oe_highlight"   string="Konfirmasi" type="object" attrs="{'invisible':['|',('is_visible_konfimasi_button','!=',True),('state','!=','submitted')]}"/>
                        <button name="verifikasi" class="oe_highlight"  string="Verifikasi" type="object"  attrs="{'invisible':['|',('is_visible_verifikasi_button','!=',True),('state','!=','confirmed')]}"/>
                        <button name="validasi" class="oe_highlight"  string="Validasi" type="object"  attrs="{'invisible':['|',('is_visible_validasi_button','!=',True),('state','!=','verified')]}"/>
                        <button name="setujui" class="oe_highlight" string="Setujui" type="object" attrs="{'invisible':['|',('is_visible_approval_button','!=',True),('state','!=','validated')]}" />
                        <button name="reject" class="oe_highlight btn-danger"  string="Reject" type="object" confirm="Apakah anda yakin ??" attrs="{'invisible':[('is_visible_reject_button','!=',True)]}" />
                        <button name="cancel" class="oe_highlight btn-danger" attrs="{'invisible':['|',('is_owner','=',False),('state','in',['draft','cancelled', 'finished'])]}" string="Cancel" type="object"/>
                        <button name="set_finish" class="oe_highlight" string="Set To Finish" type="object" attrs="{'invisible':['|',('state','!=','onprocess'),('is_visible_verifikasi_button','!=',True)]}" />
                        <button name="set_draft" class="oe_highlight" string="Set To Draft" type="object" attrs="{'invisible':['|',('state','!=','cancelled'),('is_owner','!=',True)]}" />
                        <button name="action_print_voucher_pertanggungjawaban_kasbon" string="Print" type="object" attrs="{'invisible':['|',('state','!=','finished')]}" icon="fa-print"/>
                        <field name="state" widget="statusbar" />                            
                    </header>
                    <sheet>
                        <group col="2">
                            <group>
                                <h1>
                                    <field name="active" invisible="True"/>
                                    <field name="name" style="color:#7C7BAD" readonly="True" attrs="{'invisible':[('name','=','/')]}"/>
                                </h1>
                            </group>
                        </group>
                        <group col="2">
                            <group>
                                <field name="cara_pembayaran" attrs="{'readonly':['|',('state','!=','draft'),('is_owner','=',False)]}"  required="1"/>
                                <field name="bank_nama" attrs="{'readonly':['|',('state','!=','draft'),('is_owner','=',False)],'required':[('cara_pembayaran','in',[1,2])], 'invisible':[('cara_pembayaran','not in',[1,2])]}"/>

                                <field name="Cek_billyet_no" attrs="{'readonly':['|',('state','!=','draft'),('is_owner','=',False)], 'required':[('cara_pembayaran','=',1)], 'invisible':[('cara_pembayaran','!=',1)]}"/>
                                <field name="Cek_billyet_tanggal" attrs="{'readonly':['|',('state','!=','draft'),('is_owner','=',False)], 'required':[('cara_pembayaran','=',1)], 'invisible':[('cara_pembayaran','!=',1)]}"/>

                                <field name="bank_ac_name" attrs="{'readonly':['|',('state','!=','draft'),('is_owner','=',False)], 'required':[('cara_pembayaran','=',2)], 'invisible':[('cara_pembayaran','!=',2)]}"/>
                                <field name="bank_ac_no" attrs="{'readonly':['|',('state','!=','draft'),('is_owner','=',False)], 'required':[('cara_pembayaran','=',2)], 'invisible':[('cara_pembayaran','!=',2)]}"/>
                            </group>
                            <group name="voucher_permintaan_kasbon">
                                <field name="voucher_permintaan_kasbon_id" domain="['&amp;',('create_uid','=',uid),('state','=','finished') ]" options="{'no_create': True, 'no_create_edit':True}" attrs="{'readonly':[('state','!=','draft')]}"/>
                            </group>
                        </group>
                        <group>
                            <group>
                                <field name="bayar_to" attrs="{'readonly':['|',('state','!=','draft'),('is_owner','=',False)]}"/>
                                <field name="bayar_nik" attrs="{'readonly':['|',('state','!=','draft'),('is_owner','=',False)]}"/>
                                <field name="total_uang_diterima" readonly="1"/>
                                <field name="kekurangan_sisa_uang_muka" readonly="1"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Uraian Penggunaan Uang Muka">
                                <field name="uraian_penggunaan_uang_muka_ids" required='1' attrs="{'readonly':['|',('state','!=','draft'),('is_owner','!=',True)]}" widget="one2many_list" context="{'uraian_penggunaan_uang_muka_ids': uraian_penggunaan_uang_muka_ids}">
                                    <tree editable="bottom" string="Uraian realisasi Penggunaan Uang Muka" create="false" >
                                        <field name="currency_id" invisible="1"/>
                                        <field name="name" readonly="1"/>
                                        <field name="nominal" sum="Total" readonly="1"/>
                                        <field name="nominal_realisasi" sum="Total"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <field name="currency_id" invisible="1"/>
                                            <field name="name" readonly="1"/>
                                            <field name="nominal" sum="Total" readonly="1"/>
                                            <field name="nominal_realisasi" sum="Total"/>
                                        </group>
                                    </form>
                                </field>
                            </page>
                            <page string="BPK Details" attrs="{'invisible':['&amp;',('is_visible_verifikasi_button','!=',True),('is_visible_validasi_button','!=',True)]}" >
                                <field name="bpk_details_ids" required='1' attrs="{'readonly':['|',('is_visible_verifikasi_button','!=',True),('state','!=','onprocess')]}" widget="one2many_list" context="{'bpk_details_ids': bpk_details_ids}">
                                    <tree editable="bottom" string="BPK Details">
                                        <field name="currency_id" invisible="1"/>
                                        <field name="Cek_billyet_no"/>
                                        <field name="Cek_billyet_tanggal" />
                                        <field name="bpk_no" />
                                        <field name="bpk_tanggal" />
                                        <field name="diterima_oleh" />
                                        <field name="diterima_tanggal" />
                                        <field name="dibayar_oleh" />
                                        <field name="dibayar_tanggal" />
                                        <field name="nominal" sum="Total"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <field name="currency_id" invisible="1"/>
                                            <field name="Cek_billyet_no"/>
                                            <field name="Cek_billyet_tanggal" />
                                            <field name="bpk_no" />
                                            <field name="bpk_tanggal" />
                                            <field name="diterima_oleh" />
                                            <field name="diterima_tanggal" />
                                            <field name="dibayar_oleh" />
                                            <field name="dibayar_tanggal" />
                                            <field name="nominal" sum="Total"/>
                                        </group>
                                    </form>
                                </field>
                            </page>
                        </notebook>
                        <group string="Lampiran" modifiers="{}">
                            <field name="attachment_ids" widget="many2many_binary" attrs="{'readonly':['|',('state','!=','draft'),('is_owner','=',False)]}" nolabel="1"/>
                        </group>
                         <group string="Keterangan" modifiers="{}">
                            <field name="keterangan" colspan="4" attrs="{'readonly':['|',('state','!=','draft'),('is_owner','=',False)]}" placeholder="Tambahkan catatan disini..." nolabel="1" height="50"/>
                        </group>
                        <hr class="mt4 mb4"/>
                        <group col="2">
                            <group>
                                <field name="diajukan_oleh" readonly="1"/>
                                <label string="Tgl" for="diajukan_tanggal"/>
                                <field name="diajukan_tanggal" readonly='1' nolabel="1"/>
                            </group>
                            <group>
                                <field name="direkomendasi_oleh" readonly='1'/>
                                <label string="Tgl" for="direkomendasi_tanggal"/>
                                <field name="direkomendasi_tanggal" readonly='1' nolabel="1"/>
                            </group>
                        </group>
                        <group col="2" >
                            <group>
                                <field name="diverifikasi_oleh" readonly='1'/>
                                <label string="Tgl" for="diverifikasi_tanggal"/>
                                <field name="diverifikasi_tanggal" readonly='1' nolabel="1"/>
                            </group>
                            <group>
                                <field name="divalidasi_oleh" readonly='1'/>
                                <label string="Tgl" for="divalidasi_tanggal"/>
                                <field name="divalidasi_tanggal" readonly='1' nolabel="1"/>
                            </group>
                        </group>
                        <group col="2" >
                            <group>
                                <field name="disetujui_oleh" readonly='1'/>
                                <label string="Tgl" for="disetujui_tanggal"/>
                                <field name="disetujui_tanggal" readonly='1' nolabel="1"/>
                            </group>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                      <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                      <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>
        
    <!-- delivery.order action window -->
        <record id="voucher_pertanggungjawaban_kasbon_action" model="ir.actions.act_window">
            <field name="name">Voucher pertanggungjawaban Kasbon</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">voucher.pertanggungjawaban.kasbon</field>
            <field name="view_mode">tree,form</field>
            <field name="view_type">form</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                <!-- Add Text Here -->
                click create to create new delivery order
                </p><p>
                <!-- More details about what a user can do with this object will be OK -->
                Voucher pertanggungjawaban Kasbon adalah dokument untuk pengajuan pembayaran 
                </p>
            </field>
        </record>
        
        <menuitem id="voucher_pertanggungjawaban_kasbon_menu_act" name="Voucher pertanggungjawaban Kasbon" parent="submission_menu_categ" action="voucher_pertanggungjawaban_kasbon_action" sequence="12"/>    
        
        <record id="voucher_pertanggungjawaban_kasbon_menu_act" model="ir.ui.menu">
            <field name="groups_id" eval="[
                        (4,ref('submission_tracking_gep_group_user'))
                    ]"/>
        </record>
        
        <record id="voucher_pertanggungjawaban_kasbon_menu_act" model="ir.ui.menu">
            <field name="groups_id" eval="[
                        (4,ref('submission_tracking_gep_group_verificator'))
                    ]"/>
        </record>
        
        <record id="voucher_pertanggungjawaban_kasbon_menu_act" model="ir.ui.menu">
            <field name="groups_id" eval="[
                        (4,ref('submission_tracking_gep_group_approval'))
                    ]"/>
        </record>
    </data>
</odoo>